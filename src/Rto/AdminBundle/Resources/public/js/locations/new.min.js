$(document).ready(function(){$("#form").submit(function(){$("#loader-login").show();$("button[type='submit']").attr("disabled","disabled");createLocation($(this).serialize())});google.maps.event.addDomListener(window,"load",initialize)});function createLocation(a){$.post(addressCreateLocation,a,function(a){a.state&&($("#loader-login").fadeOut("fast"),showMessage(a.type),$("#form")[0].reset(),$("button[type='submit']").removeAttr("disabled"))},"JSON")}
function initialize(){mapOptions={zoom:6};map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions);navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){$("#latitude").val(a.coords.latitude);$("#length").val(a.coords.longitude);a=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);addMarker(a,"Current Position",map);map.setCenter(a)},function(){handleNoGeolocation(!0)}):handleNoGeolocation(!1)}
function handleNoGeolocation(a){new google.maps.LatLng(60,105);addMarker(new google.maps.LatLng(60,105),"Current Position",map)}function addMarker(a,b,c){a=new google.maps.Marker({position:a,draggable:!0,map:c,title:b});google.maps.event.addListener(a,"dragend",function(a){$("#latitude").val(a.latLng.lat());$("#length").val(a.latLng.lng())})};